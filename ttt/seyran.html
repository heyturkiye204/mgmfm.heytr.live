<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Tıklama Sayacı</title>
</head>
<body>
    <button onclick="sayaciGuncelle()">Tıkla</button>
    <p id="counter">0</p>
    <canvas id="chart"></canvas>

    <script>
        let sayac = 0;
        let grafikVerisi = [];
        let grafik;

        function sayaciGuncelle() {
            sayac++;
            document.getElementById('counter').innerText = sayac;
            grafikVerisi.push(sayac);

            // Grafik verisini güncelle
            grafik.data.labels.push("");
            grafik.data.datasets[0].data = grafikVerisi;

            // Grafik çizimini güncelle
            grafik.update();

            // Çerezlere kaydet
            document.cookie = "tiklamaSayisi=" + sayac;
            document.cookie = "grafikVerisi=" + JSON.stringify(grafikVerisi);
        }

        // Sayfa yüklenirken grafiği başlat
        window.onload = function() {
            const chartCanvas = document.getElementById('chart').getContext('2d');
            grafik = new Chart(chartCanvas, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Tıklama Sayısı',
                        data: grafikVerisi,
                        borderColor: 'rgb(75, 192, 192)',
                        borderWidth: 2,
                        fill: false
                    }]
                },
                options: {
                    scales: {
                        x: [{
                            display: false
                        }]
                    }
                }
            });

            // Çerezden oku
            const tiklamaSayisiCerez = getCookie("tiklamaSayisi");
            const grafikVerisiCerez = getCookie("grafikVerisi");

            if (tiklamaSayisiCerez) {
                sayac = parseInt(tiklamaSayisiCerez);
                document.getElementById('counter').innerText = sayac;
            }

            if (grafikVerisiCerez) {
                grafikVerisi = JSON.parse(grafikVerisiCerez);
                grafik.update();
            }
        };

        function getCookie(name) {
            const cookieValue = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
            return cookieValue ? cookieValue.pop() : null;
        }
    </script>
</body>
</html>
